# AI 音声会話システム

## 概要

本システムは、AI との音声会話を通じて以下を行うことを目的としています：

- 会話ログの自動保存
- ユーザーの思考パターン分析
- 興味・関心の傾向把握

## 主な特徴

- **音声認識**: Web Speech API
- **会話生成**: DeepSeek V3
- **会話要約**: DeepSeek V3
- **データ保存**: Google スプレッドシート
- **音声合成**: Voicepeak（宮舞モカ）/ VOICEVOX

## システム構成

### データ管理（Google スプレッドシート）

| シート名     | 内容                 |
| ------------ | -------------------- |
| ユーザー情報 | ユーザープロフィール |
| カテゴリ名   | カテゴリ名まとめ     |
| 会話履歴     | 過去の会話記録       |
| 会話要約     | 会話の要点まとめ     |

## セットアップ手順

### 前提条件

- Python 3.x
- Rye（Python バージョン管理）
- Flask

### インストール

1. 環境変数の設定

   ```bash
   cp .env.example .env
   ```

   `.env`ファイルに DeepSeek API キーを入力

2. Google Cloud Platform 設定

   - Google Sheets API と Google Drive API を有効化
   - サービスアカウントキーをダウンロード
   - ダウンロードしたキーを`credentials.json`としてプロジェクトルートに配置

3. 依存関係のインストール

   ```bash
   rye sync
   ```

4. Flask サーバーの起動

   ```bash
   flask run
   ```

## 使用方法

1. Safari で`http://localhost:5000`にアクセス
2. 「🎙️ 開始」ボタンをクリック
3. マイク使用許可を確認
4. 会話開始

## トラブルシューティング

| 問題                                            | 解決策                                                       |
| ----------------------------------------------- | ------------------------------------------------------------ |
| Chrome で音声認識が一定時間行われないと終了する | Safari を使用する                                            |
| Safari でマイクが無効化される                   | 開発者メニューで「クロスオリジンの制限を無効にする」を有効化 |
